package jobJa.recruit.controller;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.annotation.MultipartConfig;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import jobJa.atchFile.mapper.AtchFileDetailMapper;
import jobJa.atchFile.vo.AtchFileDetailVO;
import jobJa.common.mapper.ComCodeMapper;
import jobJa.common.vo.ComCodeInfoVO;
import jobJa.common.vo.ComDetCodeInfoVO;
import jobJa.member.service.JobOfferService;
import jobJa.member.service.ResumeService;
import jobJa.member.vo.ApplicationVO;
import jobJa.member.vo.InterestRecruitVO;
import jobJa.member.vo.JobOfferVO;
import jobJa.myPage.member.vo.MemberVO;
import jobJa.myPage.member.vo.ResumeVO;
import jobJa.recruit.mapper.InterestRecruitMapper;
import jobJa.recruit.service.RecruitService;
import jobJa.recruit.vo.BenefitsVO;
import jobJa.recruit.vo.RecruitFormVO;
import jobJa.recruit.vo.RecruitVO;
import jobJa.util.ArticlePage;
import jobJa.util.ModelAttributeUtil;
import lombok.extern.slf4j.Slf4j;

@MultipartConfig
@Slf4j
@RequestMapping("/recruit")
@Controller
public class RecruitController {

   @Autowired
   RecruitService recruitService;
   
   @Autowired
   ModelAttributeUtil modelAttributeUtil;
   
   @Autowired
   JobOfferService jobOfferService;
   
   @Autowired
   ResumeService resumeService;
   
   @Autowired
   InterestRecruitMapper interestRecruitMapper;
   
   @Autowired
   ComCodeMapper comCodeMapper;
   
   @Autowired
   AtchFileDetailMapper atchFileDetailMapper;
   
   @GetMapping("/create")
   public String create(RecruitFormVO recruitFormVO, Model model) {
      
      List<ComCodeInfoVO> comCodeInfoVOList = this.recruitService.getComCode();
      
      //학력 공통 코드 가지고 오는것
      List<ComDetCodeInfoVO> comCodeAb = this.recruitService.getComCodeInfoa();
      
      //인사 담당자 직급 가지고 오는것
      List<ComDetCodeInfoVO> comCodeAC = this.recruitService.getComCodeInfob();
      
      MemberVO memberVO = modelAttributeUtil.getCurrentLoginName();
      
      
      String memId = memberVO.getMemId();
      
      log.info("memIdZZZ:"+memId);
      String entNo = this.recruitService.getEntNo(memId);
      log.info("memIdZZZz:"+entNo);
      recruitFormVO.setComCodeInfoVOList(comCodeInfoVOList);
      recruitFormVO.setComCodeAb(comCodeAb);
      recruitFormVO.setComCodeAC(comCodeAC);
      recruitFormVO.setEntNo(entNo);
      
      
      model.addAttribute("recruitFormVO", recruitFormVO);

      log.info("comCodeInfoVOListikjjij :" +recruitFormVO.getEntNo());
      log.info("comCodeInfoVOListikjjijZZZ :" +comCodeAb);
      log.info("comCodeInfoVOListikjjijZZZaa :" +comCodeAC);
      log.info("comCodeInfoVOListikjjijZZZaa :" +comCodeAC);
      log.info("comCodeInfoVOListikjjijZZZaa :" + recruitFormVO.getBenCd());
      
      
      
      
      return "recruit/recruitCreate"; 
   }
   
   @ResponseBody
   @PostMapping("/createAjax")
   public List<ComDetCodeInfoVO> createAjax(Model model,@RequestBody RecruitVO recruitVO){
      log.info("여까지오니?");
      
      log.info("zzzzzzzzzzzzddddddd" + recruitVO);
      
      String comCd = recruitVO.getComCd();
      
      String recruitJob = recruitVO.getRecruitJob();
      
      
      List<ComDetCodeInfoVO> comDetCodeInfoVO = this.recruitService.getComDetCode(comCd);
//      
//      
//      log.info("zzzzzzzzzzzz" + comDetCodeInfoVO);
//      model.addAttribute("comDetCodeInfoVO", comDetCodeInfoVO);
//      
      return comDetCodeInfoVO;
   }
   
   
   @ResponseBody
   @PostMapping("/createAjax2")
   public List<ComDetCodeInfoVO> createAjax2(Model model,@RequestBody RecruitVO recruitVO){
      log.info("여까지오니?");
      
      log.info("zzzzzzzzzzzzddddddd" + recruitVO);
      
      String recruitJob = recruitVO.getRecruitJob();
      
      List<ComDetCodeInfoVO> comDetCodeInfoVO = this.recruitService.getComDetCode(recruitJob);

      return comDetCodeInfoVO;
   }
   
   @PostMapping("/createPost")
   public String createPost(RecruitFormVO recruitFormVO) {
      log.info("createPost->recruitFormVO : " + recruitFormVO);
      
      log.info("recruitFormVO.recruitNo : " +  recruitFormVO.getRecruitNo() );
      
      int result = this.recruitService.createPost(recruitFormVO);
      
      log.info("createPost->recruitFormVO : " + recruitFormVO);
      
      return "redirect:/recruit/list";
   }
   
   //일반 리스트 불러오기
   ///list?keyword=&recruitJob=&recruitLocation=&recruitWorkType=IWS01002&recruitAcdmCr=&currentPage=2&sort=null
   @RequestMapping(value = "/list")
   public String list(RecruitFormVO formVO, Model model,@RequestParam(value = "currentPage",required = false,defaultValue = "1") int currentPage) {
	   int total=0;
	   List<RecruitVO> recruitVOList=null;
      MemberVO memberVO = modelAttributeUtil.getCurrentLoginName();
      
      log.info("list => formVO : " + formVO);
      log.info("currentPage : {}", formVO.getCurrentPage());
      
      // 입사제안 리스트
      List<JobOfferVO> jobOfferVOList = jobOfferService.getOffers(memberVO);
      log.info("list => jobOfferVOList : " + jobOfferVOList);
      
      // 이력서 리스트
      List<ResumeVO> resumeVOList = resumeService.getResumes(memberVO);
      log.info("list => resumeVOList : " + resumeVOList);
      
      List<ComCodeInfoVO> comCodeInfoVOList = this.recruitService.getComCode();
		
	  List<ComDetCodeInfoVO> comCodeAb = this.recruitService.getComCodeInfoa();
      
	  String memId = memberVO.getMemId();
	  
	  //고용 형태 가지고 오는 것
	  List<ComDetCodeInfoVO> comCodeAa = this.recruitService.getComCodeInfob();
	  
      
     log.info("comCodeAc" + comCodeAa);
     // 입사지원 횟수
      int appCnt = 0;
      for(int i = 0; i < resumeVOList.size(); i++) {
          List<ApplicationVO> applicationList = resumeService.getApplications(resumeVOList.get(i).getResumeNo());
          log.info("applicationList : " + applicationList);
          appCnt += applicationList.size();
      }
      log.info("appCnt : " + appCnt);
      
      List<InterestRecruitVO> interestRecruitVOList = recruitService.getInterestRecruit(memberVO);
      log.info("interestRecruitVOList : " + interestRecruitVOList);
      
      Map<String,Object> map = new HashMap<String, Object>();
      
      //페이징 처리
      map.put("memId", memId);
           
//      map.put("currentPage", currentPage);
//      map.put("recruitJob", recruitJob);
//      map.put("recruitLocation", recruitLocation);
//      map.put("recruitAcdmCr", recruitAcdmCr);
      
      
      map.put("currentPage", formVO.getCurrentPage());
      map.put("sort",formVO.getSort());
      
      
      log.info("asdfkjhbasdjkfhajsdf"  + formVO);
      if (formVO.getRecruitWorkType() != null) {
          map.put("recruitLevels", formVO.getRecruitWorkType());
      }
      if (formVO.getRecruitJobs() != null) {
          map.put("recruitJobs", formVO.getRecruitJobs());
      }
      if (formVO.getRecruitLocation() != null) {
          map.put("recruitLocations", formVO.getRecruitLocation());
      }
      if (formVO.getRecruitAcdmCr() != null) {
          map.put("selectStudies", formVO.getRecruitAcdmCr());
      }
//      map.put("recruitWorkType", Arrays.asList(recruitWorkType.split("_")));
//      map.put("recruitJob", Arrays.asList(recruitJob.split("_")));
//      map.put("recruitLocation", Arrays.asList(recruitLocation.split("_")));
//      map.put("recruitAcdmCr", Arrays.asList(recruitAcdmCr.split("_")));
//      
      
      ///map : {selectStudies=[IET01001], sort=null, recruitWorkType=[IWS01001, IWS01002], currentPage=1, memId=a001}
      //map : {sort=null, currentPage=1, recruitLevels=[IWS01006], memId=a001}
      log.info("list->map : {}", map);
      /*
      RecruitFormVO [comCodeInfoVOList=null, comCodeAb=null, comCodeAC=null, recruitVO=null, 
      recruitNo=REC00088,REC00085,REC00087,REC00083,REC00086, benCd=null, comDetCodeInfoVO=null, 
      entNo=null, recruitThumb=null, recruitJobs=null, recruitLocation=null, recruitWorkType=[IWS01006], 
      recruitAcdmCr=null, currentPage=1, sort=null, keyword=null, memId=a001]
       */
      log.info("list->formVO : " + formVO);
      if(formVO.getRecruitWorkType() == null && formVO.getRecruitJobs() == null 
  		  	&& formVO.getRecruitLocation() == null && formVO.getRecruitAcdmCr() == null) {
    	  log.info("getList");
    	  recruitVOList = this.recruitService.getList(map);
      }else {
    	  log.info("getFilterList");
    	  recruitVOList=this.recruitService.getFilterList(map);
      }
      
      
      //
      if(formVO.getRecruitWorkType() == null && formVO.getRecruitJobs() == null 
    		  	&& formVO.getRecruitLocation() == null && formVO.getRecruitAcdmCr() == null) {
    	  total = this.recruitService.getTotal(map);
      }else {
    	  total = this.recruitService.getConditionTotal(map);
      }
      log.info("total: " + total);
      
      ArticlePage<RecruitVO> data = new ArticlePage<RecruitVO>(total, formVO.getCurrentPage(), 12, recruitVOList);
      
      data.setUrl("/recruit/list");
      data.setRecruitJobs(formVO.getRecruitJobs() );
      data.setRecruitLocation(formVO.getRecruitLocation());
      data.setRecruitWorkType(formVO.getRecruitWorkType());
      data.setRecruitAcdmCr(formVO.getRecruitAcdmCr());
      data.setSort(formVO.getSort());
      
      log.info("zzeb: " + comCodeInfoVOList);
      
      model.addAttribute("memId", memId);
      
      model.addAttribute("jobOfferVOList",jobOfferVOList);
      
      model.addAttribute("resumeVOList",resumeVOList);
      
      model.addAttribute("appCnt",appCnt);
      
      model.addAttribute("interestRecruitVOList",interestRecruitVOList);
      
      model.addAttribute("recruitVOList",recruitVOList);
      
      model.addAttribute("comCodeInfoVOList", comCodeInfoVOList);
      
      //고용 형태
      model.addAttribute("recruitWorkType", formVO.getRecruitWorkType());
      
      //학력
      model.addAttribute("selectStudies", formVO.getRecruitAcdmCr());     
      
      //근무지역
      model.addAttribute("recruitLocation", formVO.getRecruitLocation());     
      
      //직업
      model.addAttribute("recruitJobz", formVO.getRecruitJobs());     
      
      
      model.addAttribute("comCodeAb", comCodeAb);
      
      model.addAttribute("comCodeAa", comCodeAa);

      model.addAttribute("data", data);
      
      return "recruit/list";
   }
   
   //스크랩순으로 리스트 불러오기
   @GetMapping("/scrapList")
   public String scrapList(RecruitFormVO formVO,String sort,Model model,@RequestParam(value = "currentPage",required = false,defaultValue = "1") int currentPage ) {

      MemberVO memberVO = modelAttributeUtil.getCurrentLoginName();
      
      log.info("list => memberVO : " + memberVO);
      
      // 입사제안 리스트
      List<JobOfferVO> jobOfferVOList = jobOfferService.getOffers(memberVO);
      log.info("list => jobOfferVOList : " + jobOfferVOList);
      
      // 이력서 리스트
      List<ResumeVO> resumeVOList = resumeService.getResumes(memberVO);
      log.info("list => resumeVOList : " + resumeVOList);
      
      List<ComCodeInfoVO> comCodeInfoVOList = this.recruitService.getComCode();
		
	  List<ComDetCodeInfoVO> comCodeAb = this.recruitService.getComCodeInfoa();
      
	  String memId = memberVO.getMemId();
	  
	  //고용 형태 가지고 오는 것
	  List<ComDetCodeInfoVO> comCodeAa = this.recruitService.getComCodeInfob();
	  
      
     log.info("comCodeAc" + comCodeAa);
     // 입사지원 횟수
      int appCnt = 0;
      for(int i = 0; i < resumeVOList.size(); i++) {
          List<ApplicationVO> applicationList = resumeService.getApplications(resumeVOList.get(i).getResumeNo());
          log.info("applicationList : " + applicationList);
          appCnt += applicationList.size();
      }
      log.info("appCnt : " + appCnt);
      
      List<InterestRecruitVO> interestRecruitVOList = recruitService.getInterestRecruit(memberVO);
      log.info("interestRecruitVOList : " + interestRecruitVOList);
      
      Map<String,Object> map = new HashMap<String, Object>();
      
      //페이징 처리
      map.put("memId", memId);
      
      map.put("currentPage", currentPage);
      
      List<RecruitVO> recruitVOList = this.recruitService.getScrapList(map);
      
      int total = this.recruitService.getTotal(map);
      
      ArticlePage<RecruitVO> data = new ArticlePage<RecruitVO>(total, currentPage, 12, recruitVOList);
      
      data.setUrl("/recruit/scrapList");
      if(sort != null) {
      data.setSort(sort);
      }
      log.info("zzeb: " + comCodeInfoVOList);
      
      model.addAttribute("memId", memId);
      
      model.addAttribute("jobOfferVOList",jobOfferVOList);
      
      model.addAttribute("resumeVOList",resumeVOList);
      
      model.addAttribute("appCnt",appCnt);
      
      model.addAttribute("interestRecruitVOList",interestRecruitVOList);
      
      model.addAttribute("recruitVOList",recruitVOList);
      
      model.addAttribute("comCodeInfoVOList", comCodeInfoVOList);
      
      model.addAttribute("comCodeAb", comCodeAb);
      
      model.addAttribute("comCodeAa", comCodeAa);

      model.addAttribute("data", data);
      
      return "recruit/list";
   }
   
   //마감임박 순으로 불러오기
   @GetMapping("/deadlineList")
   public String deadlineList(Model model,String sort,@RequestParam(value = "currentPage",required = false,defaultValue = "1") int currentPage ) {

      MemberVO memberVO = modelAttributeUtil.getCurrentLoginName();
      
      log.info("list => memberVO : " + memberVO);
      
      // 입사제안 리스트
      List<JobOfferVO> jobOfferVOList = jobOfferService.getOffers(memberVO);
      log.info("list => jobOfferVOList : " + jobOfferVOList);
      
      // 이력서 리스트
      List<ResumeVO> resumeVOList = resumeService.getResumes(memberVO);
      log.info("list => resumeVOList : " + resumeVOList);
      
      List<ComCodeInfoVO> comCodeInfoVOList = this.recruitService.getComCode();
		
	  List<ComDetCodeInfoVO> comCodeAb = this.recruitService.getComCodeInfoa();
      
	  String memId = memberVO.getMemId();
	  
	  //고용 형태 가지고 오는 것
	  List<ComDetCodeInfoVO> comCodeAa = this.recruitService.getComCodeInfob();
	  
      
	  log.info("comCodeAc" + comCodeAa);
	  // 입사지원 횟수
      int appCnt = 0;
      for(int i = 0; i < resumeVOList.size(); i++) {
          List<ApplicationVO> applicationList = resumeService.getApplications(resumeVOList.get(i).getResumeNo());
          log.info("applicationList : " + applicationList);
          appCnt += applicationList.size();
      }
      log.info("appCnt : " + appCnt);
      
      List<InterestRecruitVO> interestRecruitVOList = recruitService.getInterestRecruit(memberVO);
      log.info("interestRecruitVOList : " + interestRecruitVOList);
      
      Map<String,Object> map = new HashMap<String, Object>();
      
      //페이징 처리
      map.put("memId", memId);
      
      map.put("currentPage", currentPage);
      
      List<RecruitVO> recruitVOList = this.recruitService.getDeadlineList(map);
      
      int total = this.recruitService.getTotal(map);
      
      ArticlePage<RecruitVO> data = new ArticlePage<RecruitVO>(total, currentPage, 12, recruitVOList);
      
      data.setUrl("/recruit/deadlineList");
      if(sort != null) {
          data.setSort(sort);
          }
      
      log.info("zzeb: " + comCodeInfoVOList);
      
      model.addAttribute("memId", memId);
      
      model.addAttribute("jobOfferVOList",jobOfferVOList);
      
      model.addAttribute("resumeVOList",resumeVOList);
      
      model.addAttribute("appCnt",appCnt);
      
      model.addAttribute("interestRecruitVOList",interestRecruitVOList);
      
      model.addAttribute("recruitVOList",recruitVOList);
      
      model.addAttribute("comCodeInfoVOList", comCodeInfoVOList);
      
      model.addAttribute("comCodeAb", comCodeAb);
      
      model.addAttribute("comCodeAa", comCodeAa);

      model.addAttribute("data", data);
      
      return "recruit/list";
   }
   @ResponseBody
   @PostMapping("/ajaxInterestRecruit")
   public int ajaxInterestRecruit(@RequestBody InterestRecruitVO interestRecruitVO) {
      
      log.info("interestRecruitVO : "+ interestRecruitVO);
      
      int res = interestRecruitMapper.ajaxInterestRecruit(interestRecruitVO);
      
      log.info("res : " + res);
      
      if(res == 0) {
         res = interestRecruitMapper.ajaxInterestRecAdd(interestRecruitVO);
         log.info("add -> res : " + res);
      }else {
         res = interestRecruitMapper.ajaxInterestRecDel(interestRecruitVO);
         log.info("del -> res : " + res);
      }
      
      int count = interestRecruitMapper.getStoredRecruit(interestRecruitVO);
      
      return count;
   }

//
//   @ResponseBody
//   @RequestMapping("/getFilterList")
//   public ArticlePage<RecruitVO> getFilterList(RecruitFormVO formVO) {
//      
//      
//      String memId = (String) formVO.getMemId();
//      
//      List<String> selectStudy = (List<String>)formVO.getRecruitAcdmCr();
//      log.info("selectStudy" + selectStudy);
//      
//      List<String> recruitLevel = (List<String>)formVO.getRecruitWorkType();
//      log.info("recruitLevel" + recruitLevel);
//      
//      List<String> recruitLocations = (List<String>)formVO.getRecruitLocation();
//      log.info("recruitLocation" + recruitLocations);
//      
//      List<String> recruitJobs = (List<String>) formVO.getRecruitJobs();
//      log.info("recruitJobs" + recruitJobs);
//         
//      List<RecruitVO> selectFilterVOList = this.recruitService.getFilterList(selectStudy,recruitLevel,recruitLocations,recruitJobs,memId,formVO.getCurrentPage());
//      
//      Map<String,Object> map = new HashMap<String, Object>();
//        
//      if (recruitLevel != null) {
//             map.put("recruitWorkType", Arrays.asList(recruitLevel));
//         }
//         if (recruitJobs != null) {
//             map.put("recruitJobs", Arrays.asList(recruitJobs));
//         }
//         if (recruitLocations != null) {
//             map.put("recruitLocations", Arrays.asList(recruitLocations));
//         }
//         if (selectStudy != null) {
//             map.put("selectStudies", Arrays.asList(selectStudy));
//         }
//      map.put("memId", memId);
//      
//      map.put("currentPage", formVO.getCurrentPage());
//      
//      map.put("selectStudies", selectStudy);
//      
//      map.put("recruitLevels", recruitLevel);
//      
//      map.put("recruitLocations", recruitLocations);
//      
//      map.put("recruitJobs", recruitJobs);
//      
//      int total = this.recruitService.getConditionTotal(map);
//      
//      log.info("totalzz : " + total);
//     
//      
//      ArticlePage<RecruitVO> info = new ArticlePage<RecruitVO>(total, formVO.getCurrentPage(), 12, selectFilterVOList);
//      log.info("totalzz : " + info);
//      info.setUrl("/recruit/list");
//      
//      info.setRecruitJob(recruitJobs.stream().map(Object::toString).collect(Collectors.joining(",")));
//      
//      info.setRecruitLocation(recruitLocations.stream().map(Object::toString).collect(Collectors.joining(",")));
//      
//      info.setRecruitWorkType(recruitLevel.stream().map(Object::toString).collect(Collectors.joining(",")));
//      
//      info.setRecruitAcdmCr(selectStudy.stream().map(Object::toString).collect(Collectors.joining(",")));
      
//      info.setUrl("/recruit/list");
//      info.setRecruitAcdmCr(selectStudy);
//      info.setRecruitLocation(recruitLocations);
//      info.setRecruitWorkType(recruitLevel);
//      info.setRecruitJob(recruitJobs);\
      
//      StringBuilder params = new StringBuilder();
//      if (!selectStudy.isEmpty()) {
//          params.append("?recruitAcdmCr=").append(String.join("&recruitAcdmCr=", selectStudy));
//      }
//      if (!recruitLocations.isEmpty()) {
//          if (params.length() > 0) {
//              params.append("&");
//          } else {
//              params.append("?");
//          }
//          params.append("recruitLocation=").append(String.join("&recruitLocation=", recruitLocations));
//      }
//      if (!recruitLevel.isEmpty()) {
//          if (params.length() > 0) {
//              params.append("&");
//          } else {
//              params.append("?");
//          }
//          params.append("recruitWorkType=").append(String.join("&recruitWorkType=", recruitLevel));
//      }
//      if (!recruitJobs.isEmpty()) {
//          if (params.length() > 0) {
//              params.append("&");
//          } else {
//              params.append("?");
//          }
//          params.append("recruitJob=").append(String.join("&recruitJob=", recruitJobs));
//      }
//      if (formVO.getKeyword() != null && !formVO.getKeyword().isEmpty()) {
//          if (params.length() > 0) {
//              params.append("&");
//          } else {
//              params.append("?");
//          }
//          params.append("keyWord=").append(formVO.getKeyword());
//      }
//
//      String urlWithParams = "/recruit/getFilterList" ;
//      info.setUrl(urlWithParams);
//
//      return info;      
      
//      
//      
//      
//      String selectStudyString = String.join(",", selectStudy);
//      String recruitLocationsString = String.join(",", recruitLocations);
//      String recruitLevelString = String.join(",", recruitLevel);
//      String recruitJobsString = String.join(",", recruitJobs);
//      
//      info.setUrl("/recruit/list");
//      List<String> selectStudyList = Arrays.asList(selectStudyString.split(","));
//      List<String> recruitLocationsList = Arrays.asList(recruitLocationsString.split(","));
//      List<String> recruitLevelList = Arrays.asList(recruitLevelString.split(","));
//      List<String> recruitJobsList = Arrays.asList(recruitJobsString.split(","));
//      log.info("totalzzd : " + info);
//      
//      info.setRecruitAcdmCr(selectStudyList);
//      
//      info.setRecruitJob(recruitJobsList);
//      
//      info.setRecruitLocation(recruitLocationsList);
//      
//      info.setRecruitWorkType(recruitLevelList);
//      log.info("selectFilterVOList : " + selectFilterVOList);
//      
//      return info;
//   }

   
   
   
   
	/**
	 * 채용 공고 디테일 
	 */
   @GetMapping("/{recruitNo}/detail")
   public String detail(@PathVariable("recruitNo") String recruitNo , Model model) {
	   
	   
	   // 회원 아이디
	   MemberVO memberVO = modelAttributeUtil.getCurrentLoginName();
	   
	   log.info("recruitNo : " + recruitNo);
	   // 채용 공고 상세정보
	   RecruitVO recruitVO = recruitService.getByRecNo(recruitNo);
	   log.info("recruitVO : " + recruitVO);

	   // 직무 공통코드로 불러오기
	   ComCodeInfoVO job = comCodeMapper.getComDetCodeInfo(recruitVO.getRecruitJob());
	   log.info("job : " + job);

	   // 고용형태 공통코드로 불러오기
	   ComCodeInfoVO workType = comCodeMapper.getComDetCodeInfo(recruitVO.getRecruitWorkType());
	   log.info("workType : " + workType);
	   
	   // 혜택 및 복지 정보
	   List<BenefitsVO> benefitsVOList = recruitService.getBenefits(recruitNo);
	   log.info("benefitsVOList : " , benefitsVOList);
	   
	   // 첨부파일 리스트
	   List<AtchFileDetailVO> atchFileList = atchFileDetailMapper.getAtchByAfId(recruitNo);

	   // 관심공고 리스트
	   List<InterestRecruitVO> interestRecruitVOList = recruitService.getInterestRecruit(memberVO);
	   log.info("interestRecruitVOList : " + interestRecruitVOList);
	   
	   model.addAttribute("recruitVO", recruitVO);
	   model.addAttribute("benefitsVOList", benefitsVOList);
	   model.addAttribute("job", job);
	   model.addAttribute("workType", workType);
	   model.addAttribute("atchFileList", atchFileList);
	   model.addAttribute("interestRecruitVOList", interestRecruitVOList);
	   
	   return "recruit/detail";
   }
	   

}